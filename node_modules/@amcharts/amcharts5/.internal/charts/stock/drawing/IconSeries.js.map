{"version":3,"file":"IconSeries.js","sourceRoot":"","sources":["../../../../../../src/.internal/charts/stock/drawing/IconSeries.ts"],"names":[],"mappings":"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","sourcesContent":["import type { Percent } from \"../../../core/util/Percent\";\r\nimport type { ISpritePointerEvent } from \"../../../core/render/Sprite\";\r\nimport type { DataItem } from \"../../../core/render/Component\";\r\nimport type { SpriteResizer } from \"../../../core/render/SpriteResizer\";\r\n\r\nimport { PolylineSeries, IPolylineSeriesSettings, IPolylineSeriesPrivate, IPolylineSeriesDataItem } from \"./PolylineSeries\";\r\nimport { Bullet } from \"../../../core/render/Bullet\";\r\nimport { Graphics } from \"../../../core/render/Graphics\";\r\nimport { Template } from \"../../../core/util/Template\";\r\n\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $object from \"../../../core/util/Object\";\r\n\r\nexport interface IIconSeriesDataItem extends IPolylineSeriesDataItem {\r\n\r\n\t/**\r\n\t * An SVG path of the icon.\r\n\t */\r\n\tsvgPath: string;\r\n}\r\n\r\nexport interface IIconSeriesSettings extends IPolylineSeriesSettings {\r\n\r\n\t/**\r\n\t * An SVG path of the icon.\r\n\t */\r\n\ticonSvgPath: string;\r\n\r\n\t/**\r\n\t * Scale (0-X).\r\n\t */\r\n\ticonScale?: number;\r\n\r\n\t/**\r\n\t * Relative horizontal center.\r\n\t */\r\n\ticonCenterX?: Percent;\r\n\r\n\t/**\r\n\t * Relative vertical center.\r\n\t */\r\n\ticonCenterY?: Percent;\r\n\r\n\t/**\r\n\t * Should icon snap to closest data item?\r\n\t */\r\n\tsnapToData?: boolean;\r\n}\r\n\r\nexport interface IIconSeriesPrivate extends IPolylineSeriesPrivate {\r\n}\r\n\r\nexport class IconSeries extends PolylineSeries {\r\n\tpublic static className: string = \"IconSeries\";\r\n\tpublic static classNames: Array<string> = PolylineSeries.classNames.concat([IconSeries.className]);\r\n\r\n\tdeclare public _settings: IIconSeriesSettings;\r\n\tdeclare public _privateSettings: IIconSeriesPrivate;\r\n\tdeclare public _dataItemSettings: IIconSeriesDataItem;\r\n\r\n\tpublic spriteResizer!: SpriteResizer;\r\n\r\n\tprotected _tag = \"icon\";\r\n\r\n\tprotected _afterNew() {\r\n\t\tsuper._afterNew();\r\n\r\n\t\tthis.spriteResizer = this._getStockChart().spriteResizer;\r\n\r\n\t\tthis.bullets.clear();\r\n\r\n\t\tthis.strokes.template.set(\"visible\", false);\r\n\t\tthis.fills.template.set(\"visible\", false);\r\n\r\n\t\tthis.bullets.push((root, _series, dataItem) => {\r\n\t\t\tconst dataContext = dataItem.dataContext as any;\r\n\t\t\tconst template = dataContext.settings;\r\n\t\t\tif (template) {\r\n\t\t\t\tconst sprite = Graphics.new(root, {\r\n\t\t\t\t\tdraggable: true,\r\n\t\t\t\t\tthemeTags: [\"icon\"]\r\n\t\t\t\t}, template);\r\n\r\n\t\t\t\tdataContext.sprite = sprite;\r\n\r\n\t\t\t\tthis._addBulletInteraction(sprite);\r\n\r\n\t\t\t\tsprite.events.on(\"click\", (_e) => {\r\n\t\t\t\t\tconst spriteResizer = this.spriteResizer;\r\n\t\t\t\t\tif (spriteResizer.get(\"sprite\") == sprite) {\r\n\t\t\t\t\t\tspriteResizer.set(\"sprite\", undefined);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tspriteResizer.set(\"sprite\", sprite);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tsprite.events.on(\"pointerover\", () => {\r\n\t\t\t\t\tthis._isHover = true;\r\n\t\t\t\t})\r\n\r\n\t\t\t\tsprite.events.on(\"pointerout\", () => {\r\n\t\t\t\t\tthis._isHover = false;\r\n\t\t\t\t})\r\n\r\n\t\t\t\tthis.spriteResizer.set(\"sprite\", undefined);\r\n\r\n\t\t\t\tsprite.on(\"scale\", (scale) => {\r\n\t\t\t\t\ttemplate.set(\"scale\", scale)\r\n\t\t\t\t})\r\n\r\n\t\t\t\tsprite.on(\"rotation\", (rotation) => {\r\n\t\t\t\t\ttemplate.set(\"rotation\", rotation)\r\n\t\t\t\t})\r\n\r\n\t\t\t\treturn Bullet.new(this._root, {\r\n\t\t\t\t\tlocationX: undefined,\r\n\t\t\t\t\tsprite: sprite\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprotected _setContextSprite(_context: any) { }\r\n\r\n\tprotected _handlePointerClick(event: ISpritePointerEvent) {\r\n\t\tif (this._selected.length > 0) {\r\n\t\t\tthis._hideResizer();\r\n\t\t\tthis.unselectAllDrawings();\r\n\t\t}\r\n\t\telse if (this._drawingEnabled) {\r\n\t\t\tif (!this._isHover) {\r\n\t\t\t\tsuper._handlePointerClick(event);\r\n\r\n\t\t\t\tconst dataObject = this.data.getIndex(this.data.length - 1) as any;\r\n\t\t\t\tdataObject.settings = this._getIconTemplate();\r\n\r\n\t\t\t\tthis._increaseIndex();\r\n\t\t\t\tthis._di[this._index] = {};\r\n\r\n\t\t\t\tthis._dispatchStockEvent(\"drawingadded\", this._drawingId, this._index);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.isDrawing(false);\r\n\t}\r\n\r\n\tpublic disposeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\r\n\t\tsuper.disposeDataItem(dataItem);\r\n\t\tthis.spriteResizer.set(\"sprite\", undefined);\r\n\t\tthis._isHover = false;\r\n\t}\r\n\r\n\tprotected _applySettings(index: number, settings?: { [index: string]: any }) {\r\n\t\tsuper._applySettings(index, settings);\r\n\t\tlet template: Template<any>;\r\n\t\tlet sprite!: Graphics;\r\n\r\n\t\tlet context = this._getContext(index);\r\n\t\tif (context) {\r\n\t\t\tsprite = context.sprite;\r\n\t\t\ttemplate = context.settings;\r\n\r\n\t\t\tif (sprite) {\r\n\r\n\t\t\t\tconst svgPath = this.get(\"iconSvgPath\");\r\n\t\t\t\tconst centerX = this.get(\"iconCenterX\");\r\n\t\t\t\tconst centerY = this.get(\"iconCenterY\");\r\n\r\n\t\t\t\tsprite.set(\"svgPath\", svgPath);\r\n\t\t\t\tsprite.set(\"centerX\", centerX);\r\n\t\t\t\tsprite.set(\"centerY\", centerY);\r\n\r\n\t\t\t\tconst defaultState = sprite.states.lookup(\"default\")!;\r\n\t\t\t\tdefaultState.set(\"svgPath\", svgPath);\r\n\t\t\t\tdefaultState.set(\"centerX\", centerX);\r\n\t\t\t\tdefaultState.set(\"centerY\", centerY);\r\n\r\n\t\t\t\tif (template) {\r\n\t\t\t\t\ttemplate.set(\"svgPath\", svgPath);\r\n\t\t\t\t\ttemplate.set(\"centerX\", centerX);\r\n\t\t\t\t\ttemplate.set(\"centerY\", centerY);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (settings) {\r\n\t\t\t\t\t$object.each(settings, (key, value) => {\r\n\t\t\t\t\t\tsprite.set(key as any, value);\r\n\t\t\t\t\t\tdefaultState.set(key as any, value);\r\n\t\t\t\t\t\tif (template) {\r\n\t\t\t\t\t\t\ttemplate.set(key, value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _dispatchAdded(): void {\r\n\r\n\t}\r\n\r\n\tprotected _getIconTemplate(): Template<any> {\r\n\t\tconst template: any = {};\r\n\r\n\t\tconst iconSvgPath = this.get(\"iconSvgPath\");\r\n\t\tif (iconSvgPath != null) {\r\n\t\t\ttemplate.svgPath = iconSvgPath;\r\n\t\t}\r\n\r\n\t\tconst iconScale = this.get(\"iconScale\");\r\n\t\tif (iconScale != null) {\r\n\t\t\ttemplate.scale = iconScale;\r\n\t\t}\r\n\r\n\t\tconst iconCenterX = this.get(\"iconCenterX\");\r\n\t\tif (iconCenterX != null) {\r\n\t\t\ttemplate.centerX = iconCenterX;\r\n\t\t}\r\n\r\n\t\tconst iconCenterY = this.get(\"iconCenterY\");\r\n\t\tif (iconCenterY != null) {\r\n\t\t\ttemplate.centerY = iconCenterY;\r\n\t\t}\r\n\r\n\t\tconst strokeColor = this.get(\"strokeColor\");\r\n\t\tif (strokeColor != null) {\r\n\t\t\ttemplate.stroke = strokeColor;\r\n\t\t}\r\n\r\n\t\tconst strokeOpacity = this.get(\"strokeOpacity\");\r\n\t\tif (strokeOpacity != null) {\r\n\t\t\ttemplate.strokeOpacity = strokeOpacity;\r\n\t\t}\r\n\r\n\t\tconst fillColor = this.get(\"fillColor\");\r\n\t\tif (fillColor != null) {\r\n\t\t\ttemplate.fill = fillColor;\r\n\t\t}\r\n\r\n\t\tconst fillOpacity = this.get(\"fillOpacity\");\r\n\t\tif (fillOpacity != null) {\r\n\t\t\ttemplate.fillOpacity = fillOpacity;\r\n\t\t}\r\n\r\n\t\treturn Template.new(template);\r\n\t}\r\n\r\n\tpublic setInteractive(value: boolean) {\r\n\t\tsuper.setInteractive(value)\r\n\r\n\t\t$array.each(this.dataItems, (dataItem) => {\r\n\t\t\tconst bullets = dataItem.bullets;\r\n\t\t\tif (bullets) {\r\n\t\t\t\t$array.each(bullets, (bullet) => {\r\n\t\t\t\t\tconst sprite = bullet.get(\"sprite\");\r\n\t\t\t\t\tif (sprite) {\r\n\t\t\t\t\t\tsprite.set(\"forceInactive\", !value);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tpublic _prepareChildren() {\r\n\t\tsuper._prepareChildren();\r\n\t\tif (this.isDirty(\"iconSvgPath\")) {\r\n\r\n\t\t\t$array.each(this._selected, (i) => {\r\n\t\t\t\tthis._applySettings(i);\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _updateSelector(selector: Graphics, index: number) {\r\n\t\tconst context = this._getContext(index);\r\n\t\tif (context) {\r\n\t\t\tconst sprite = context.sprite;\r\n\r\n\t\t\tif (sprite) {\r\n\t\t\t\tif (sprite.dataItem == this.spriteResizer.get(\"sprite\")?.dataItem) {\r\n\t\t\t\t\tselector.hide(0);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (this._selected.indexOf(index) != -1) {\r\n\t\t\t\t\t\tselector.show(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst selectorPadding = this.get(\"selectorPadding\", 5);\r\n\r\n\t\t\t\tlet bounds = sprite.bounds();\r\n\r\n\t\t\t\tlet w = (bounds.right - bounds.left) + selectorPadding * 2;\r\n\t\t\t\tlet h = (bounds.bottom - bounds.top) + selectorPadding * 2;\r\n\r\n\t\t\t\tselector.setAll({\r\n\t\t\t\t\twidth: w,\r\n\t\t\t\t\theight: h,\r\n\t\t\t\t\tx: bounds.left - selectorPadding,\r\n\t\t\t\t\ty: bounds.top - selectorPadding\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic toggleDrawing(enabled: boolean) {\r\n\t\t$array.each(this.dataItems, (dataItem) => {\r\n\t\t\tconst bullets = dataItem.bullets;\r\n\t\t\tif (bullets) {\r\n\t\t\t\t$array.each(bullets, (bullet) => {\r\n\t\t\t\t\tconst sprite = bullet.get(\"sprite\");\r\n\t\t\t\t\tif (sprite) {\r\n\t\t\t\t\t\tsprite.set(\"forceInactive\", !enabled);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\r\n\tprotected _handleBulletDragStart(event: ISpritePointerEvent) {\r\n\t\t// don't call super\r\n\t\tthis._hideResizer(event.target);\r\n\t\tconst stockChart = this._getStockChart();\r\n\t\tif (stockChart) {\r\n\t\t\tstockChart._dragStartDrawing(event);\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _handleBulletDragStop(event: ISpritePointerEvent) {\r\n\t\tconst stockChart = this._getStockChart();\r\n\t\tif (stockChart) {\r\n\t\t\tstockChart._dragStopDrawing(event);\r\n\t\t}\r\n\t\tthis._root.events.once(\"frameended\", () => {\r\n\t\t\tthis._positionBullets(event.target.dataItem as DataItem<IIconSeriesDataItem>);\r\n\t\t})\r\n\t}\r\n}"]}